{"version":3,"sources":["app/scripts/picshow.js","app/scripts/test.js","app/scripts/widget/jquery-emotion.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA9DA;AAAA;ACAA;AAAA;AAAA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAvRA;AAAA","file":"_public/scripts/app.js","sourcesContent":["(function($){\n\tvar source   = $(\"#showpic-template\").html();\n\tvar template = Handlebars.compile(source); \n\tvar picShowFn = function(element, useroptions){\n        var obj = this;\n\t    useroptions = (useroptions === undefined) ? {} : useroptions;\n\t    var options = $.extend({\n           element: element\n        }, useroptions);\n        obj.Enode = $(options.element);\n        obj.showPicBox = obj.Enode.siblings('[node-type=\"showPicBox\"]');\n        obj.Direction = 'smallcursor';\n        obj.init = function() {    \t\n        \tobj.Enode.find('a').click(function(){obj.toBig()})\n\n        }\n        obj.tosmall = function(){\n        \tobj.showPicBox.empty();\n        \tobj.Enode.show();\n        }\n        obj.toBig = function(){\n        \tobj.Enode.hide();\n        \tobj.showPicBox.html(template()).show().find('[action-type=\"tosmall\"]').click(function(){obj.tosmall()});\n        \tobj.mouseInit(obj.showPicBox.find('[node-type=\"picShow\"]'));\n        }\n        obj.mouseInit = function(el){\n        \t\n        \tel.on(\"mousemove\",function(e){\n        \t\tif((e.pageX-el.offset().left)<Math.floor(el.width()/3)){\n        \t\t\tel.removeClass('smallcursor').removeClass('rightcursor').addClass('leftcursor');\n        \t\t\tobj.Direction = 'leftcursor';\n        \t\t}else if((e.pageX-el.offset().left)>Math.floor(el.width()*2/3)){\n        \t\t\tel.removeClass('leftcursor').removeClass('smallcursor').addClass('rightcursor');\n        \t\t\tobj.Direction = 'rightcursor';\n        \t\t}else{ \n        \t\t\tel.removeClass('leftcursor').removeClass('rightcursor').addClass('smallcursor');\n        \t\t\tobj.Direction = 'smallcursor';\n        \t\t//console.log((e.pageX-el.offset().left) + \", \" + (e.pageY-el.offset().top))\n        \t\t}\n        \t})\n        \tel.click(function(e){\n        \t\tif(obj.Direction == 'smallcursor'){\n        \t\t\tobj.tosmall();\n        \t\t}\n        \t})\n        }\n    }\n    $.fn.picShow = function(options){\n        return this.each(function(){\n            var element = $(this);\n\n            // Return early if this element already has a plugin instance\n            if (element.data('picShow')) return;\n\n            // Pass options and element to the plugin constructer\n            var picShow = new picShowFn(this, options);\n            picShow.init();\n            // Store the plugin object in this element's data\n            element.data('picShow', picShow);\n        });\n    }\n    $('[node-type=\"feed_list_media_prev\"]').picShow()\n})(jQuery);","var a = 1234","/*!\r\n * jQuery Sina Emotion v2.1.0\r\n * http://www.clanfei.com/\r\n *\r\n * Copyright 2012-2014 Lanfei\r\n * Released under the MIT license\r\n *\r\n * Date: 2014-05-19T20:10:23+0800\r\n */\r\n(function($) {\r\n\r\n\tvar $target;\r\n\r\n\tvar options;\r\n\r\n\tvar emotions;\r\n\r\n\tvar categories;\r\n\r\n\tvar emotionsMap;\r\n\r\n\tvar parsingArray = [];\r\n\r\n\tvar defCategory = '默认';\r\n\r\n\tvar initEvents = function() {\r\n\t\t$('body').bind({\r\n\t\t\tclick: function() {\r\n\t\t\t\t$('#sinaEmotion').hide();\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t$('#sinaEmotion').bind({\r\n\t\t\tclick: function(event) {\r\n\t\t\t\tevent.stopPropagation();\r\n\t\t\t}\r\n\t\t}).delegate('.prev', {\r\n\t\t\tclick: function(event) {\r\n\t\t\t\tvar page = $('#sinaEmotion .categories').data('page');\r\n\t\t\t\tshowCatPage(page - 1);\r\n\t\t\t\tevent.preventDefault();\r\n\t\t\t}\r\n\t\t}).delegate('.next', {\r\n\t\t\tclick: function(event) {\r\n\t\t\t\tvar page = $('#sinaEmotion .categories').data('page');\r\n\t\t\t\tshowCatPage(page + 1);\r\n\t\t\t\tevent.preventDefault();\r\n\t\t\t}\r\n\t\t}).delegate('.category', {\r\n\t\t\tclick: function(event) {\r\n\t\t\t\t$('#sinaEmotion .categories .current').removeClass('current');\r\n\t\t\t\tshowCategory($.trim($(this).addClass('current').text()));\r\n\t\t\t\tevent.preventDefault();\r\n\t\t\t}\r\n\t\t}).delegate('.page', {\r\n\t\t\tclick: function(event) {\r\n\t\t\t\t$('#sinaEmotion .pages .current').removeClass('current');\r\n\t\t\t\tvar page = parseInt($(this).addClass('current').text() - 1);\r\n\t\t\t\tshowFacePage(page);\r\n\t\t\t\tevent.preventDefault();\r\n\t\t\t}\r\n\t\t}).delegate('.face', {\r\n\t\t\tclick: function(event) {\r\n\t\t\t\t//$('#sinaEmotion').hide();\r\n\t\t\t\t$target.insertText($(this).children('img').prop('alt'));\r\n\t\t\t\tevent.preventDefault();\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\r\n\tvar loadEmotions = function(callback) {\r\n\r\n\t\tif(emotions){\r\n\t\t\tcallback && callback();\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (!options) {\r\n\t\t\toptions = $.fn.sinaEmotion.options;\r\n\t\t}\r\n\r\n\t\temotions = {};\r\n\t\tcategories = [];\r\n\t\temotionsMap = {};\r\n\r\n\t\t$('body').append('<div id=\"sinaEmotion\">正在加载，请稍后...</div>');\r\n\r\n\t\tinitEvents();\r\n\r\n\t\t$.getJSON('https://api.weibo.com/2/emotions.json?callback=?', {\r\n\t\t\tsource: options.appKey,\r\n\t\t\tlanguage: options.language\r\n\t\t}, function(json) {\r\n\r\n\t\t\tvar item, category;\r\n\t\t\tvar data = json.data;\r\n\r\n\t\t\t$('#sinaEmotion').html('<div class=\"right\"><a href=\"#\" class=\"prev\">&laquo;</a><a href=\"#\" class=\"next\">&raquo;</a></div><ul class=\"categories\"></ul><ul class=\"faces\"></ul><ul class=\"pages\"></ul>');\r\n\r\n\t\t\tfor (var i = 0, l = data.length; i < l; ++i) {\r\n\t\t\t\titem = data[i];\r\n\t\t\t\tcategory = item.category || defCategory;\r\n\r\n\t\t\t\tif (!emotions[category]) {\r\n\t\t\t\t\temotions[category] = [];\r\n\t\t\t\t\tcategories.push(category);\r\n\t\t\t\t}\r\n\r\n\t\t\t\temotions[category].push({\r\n\t\t\t\t\ticon: item.icon,\r\n\t\t\t\t\tphrase: item.phrase\r\n\t\t\t\t});\r\n\r\n\t\t\t\temotionsMap[item.phrase] = item.icon;\r\n\t\t\t}\r\n\r\n\t\t\t$(parsingArray).parseEmotion();\r\n\t\t\tparsingArray = null;\r\n\r\n\t\t\tcallback && callback();\r\n\t\t});\r\n\t};\r\n\r\n\tvar showCatPage = function(page) {\r\n\r\n\t\tvar html = '';\r\n\t\tvar length = categories.length;\r\n\t\tvar maxPage = Math.ceil(length / 5);\r\n\t\tvar $categories = $('#sinaEmotion .categories');\r\n\t\tvar category = $categories.data('category') || defCategory;\r\n\r\n\t\tpage = (page + maxPage) % maxPage;\r\n\r\n\t\tfor (var i = page * 5; i < length && i < (page + 1) * 5; ++i) {\r\n\t\t\thtml += '<li class=\"item\"><a href=\"#\" class=\"category' + (category == categories[i] ? ' current' : '') + '\">' + categories[i] + '</a></li>';\r\n\t\t}\r\n\r\n\t\t$categories.data('page', page).html(html);\r\n\t};\r\n\r\n\tvar showCategory = function(category) {\r\n\t\t$('#sinaEmotion .categories').data('category', category);\r\n\t\tshowFacePage(0);\r\n\t\tshowPages();\r\n\t};\r\n\r\n\tvar showFacePage = function(page) {\r\n\r\n\t\tvar face;\r\n\t\tvar html = '';\r\n\t\tvar pageHtml = '';\r\n\t\tvar rows = options.rows;\r\n\t\tvar category = $('#sinaEmotion .categories').data('category');\r\n\t\tvar faces = emotions[category];\r\n\t\tpage = page || 0;\r\n\r\n\t\tfor (var i = page * rows, l = faces.length; i < l && i < (page + 1) * rows; ++i) {\r\n\t\t\tface = faces[i];\r\n\t\t\thtml += '<li class=\"item\"><a href=\"#\" class=\"face\"><img class=\"sina-emotion\" src=\"' + face.icon + '\" alt=\"' + face.phrase + '\" /></a></li>';\r\n\t\t}\r\n\r\n\t\t$('#sinaEmotion .faces').html(html);\r\n\t};\r\n\r\n\tvar showPages = function() {\r\n\r\n\t\tvar html = '';\r\n\t\tvar rows = options.rows;\r\n\t\tvar category = $('#sinaEmotion .categories').data('category');\r\n\t\tvar faces = emotions[category];\r\n\t\tvar length = faces.length;\r\n\r\n\t\tif (length > rows) {\r\n\t\t\tfor (var i = 0, l = Math.ceil(length / rows); i < l; ++i) {\r\n\t\t\t\thtml += '<li class=\"item\"><a href=\"#\" class=\"page' + (i == 0 ? ' current' : '') + '\">' + (i + 1) + '</a></li>';\r\n\t\t\t}\r\n\t\t\t$('#sinaEmotion .pages').html(html).show();\r\n\t\t} else {\r\n\t\t\t$('#sinaEmotion .pages').hide();\r\n\t\t}\r\n\t};\r\n\r\n\t/**\r\n\t * 为某个元素设置点击事件，点击弹出表情选择窗口\r\n\t * @param  {[type]} target [description]\r\n\t * @return {[type]}        [description]\r\n\t */\r\n\t$.fn.sinaEmotion = function(target) {\r\n\r\n\t\ttarget = target || function(){\r\n\t\t\treturn $(this).parents('form').find('textarea,input[type=text]').eq(0);\r\n\t\t};\r\n\r\n\t\tvar $that = $(this).last();\r\n\t\tvar offset = $that.offset();\r\n\r\n\t\tif($that.is(':visible')){\r\n\t\t\tif(typeof target == 'function'){\r\n\t\t\t\t$target = target.call($that);\r\n\t\t\t}else{\r\n\t\t\t\t$target = $(target);\r\n\t\t\t}\r\n\r\n\t\t\tloadEmotions(function(){\r\n\t\t\t\tshowCategory(defCategory);\r\n\t\t\t\tshowCatPage(0);\r\n\t\t\t});\r\n\t\t\t$('#sinaEmotion').css({\r\n\t\t\t\ttop: offset.top + $that.outerHeight() + 5,\r\n\t\t\t\tleft: offset.left\r\n\t\t\t}).show();\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\t};\r\n\r\n\t$.fn.parseEmotion = function() {\r\n\r\n\t\tif(! categories){\r\n\t\t\tparsingArray = $(this);\r\n\t\t\tloadEmotions();\r\n\t\t}else if(categories.length == 0){\r\n\t\t\tparsingArray = parsingArray.add($(this));\r\n\t\t}else{\r\n\t\t\t$(this).each(function() {\r\n\r\n\t\t\t\tvar $this = $(this);\r\n\t\t\t\tvar html = $this.html();\r\n\r\n\t\t\t\thtml = html.replace(/<.*?>/g, function($1) {\r\n\t\t\t\t\t$1 = $1.replace('[', '&#91;');\r\n\t\t\t\t\t$1 = $1.replace(']', '&#93;');\r\n\t\t\t\t\treturn $1;\r\n\t\t\t\t}).replace(/\\[[^\\[\\]]*?\\]/g, function($1) {\r\n\t\t\t\t\tvar url = emotionsMap[$1];\r\n\t\t\t\t\tif (url) {\r\n\t\t\t\t\t\treturn '<img class=\"sina-emotion\" src=\"' + url + '\" alt=\"' + $1 + '\" />';\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn $1;\r\n\t\t\t\t});\r\n\r\n\t\t\t\t$this.html(html);\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\t};\r\n\r\n\t$.fn.insertText = function(text) {\r\n\r\n\t\tthis.each(function() {\r\n\r\n\t\t\tif (this.tagName !== 'INPUT' && this.tagName !== 'TEXTAREA') {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (document.selection) {\r\n\t\t\t\tthis.focus();\r\n\t\t\t\tvar cr = document.selection.createRange();\r\n\t\t\t\tcr.text = text;\r\n\t\t\t\tcr.collapse();\r\n\t\t\t\tcr.select();\r\n\t\t\t} else if (this.selectionStart !== undefined) {\r\n\t\t\t\tvar start = this.selectionStart;\r\n\t\t\t\tvar end = this.selectionEnd;\r\n\t\t\t\tthis.value = this.value.substring(0, start) + text + this.value.substring(end, this.value.length);\r\n\t\t\t\tthis.selectionStart = this.selectionEnd = start + text.length;\r\n\t\t\t} else {\r\n\t\t\t\tthis.value += text;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn this;\r\n\t}\r\n\r\n\t$.fn.sinaEmotion.options = {\r\n\t\trows: 72,\t\t\t\t// 每页显示的表情数\r\n\t\tlanguage: 'cnname',\t\t// 简体（cnname）、繁体（twname）\r\n\t\tappKey: '1362404091'\t// 新浪微博开放平台的应用ID\r\n\t};\r\n})(jQuery);"]}